<div class="stepsdemo-content">

  <app-breadcrumb></app-breadcrumb>

  <button type="button"
          class="btn btn-primary p-m-2"
          data-toggle="modal"
          form="formModal"
          data-target="#exampleModal"
          >Nouvelle Journée +
  </button>

  <p-card>
      <p-table [value]="products" dataKey="id" editMode="row">
        <ng-template pTemplate="header">
          <tr>
            <th>Jour</th>
            <th>Immatriculation</th>
            <th>Kilometrage</th>
            <th>Debut</th>
            <th>Fin</th>
            <th>Pause</th>
            <th style="width:8rem"></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product let-editing="editing" let-ri="rowIndex">
          <tr [pEditableRow]="product">
            <td>
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <input pInputText type="text" [(ngModel)]="product.jour">
                </ng-template>
                <ng-template pTemplate="output">
                  {{product.jour}}
                </ng-template>
              </p-cellEditor>
            </td>
            <td>
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <input pInputText type="text" [(ngModel)]="product.immatriculation" required>
                </ng-template>
                <ng-template pTemplate="output">
                  {{product.immatriculation}}
                </ng-template>
              </p-cellEditor>
            </td>
            <td>
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <input pInputText type="text" [(ngModel)]="product.kilometrage" required>
                </ng-template>
                <ng-template pTemplate="output">
                  {{product.kilometrage}}
                </ng-template>
              </p-cellEditor>
            </td>
            <td>
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <input pInputText type="text" [(ngModel)]="product.debut" required>
                </ng-template>
                <ng-template pTemplate="output">
                  {{product.debut}}
                </ng-template>
              </p-cellEditor>
            </td>
            <td>
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <input pInputText type="text" [(ngModel)]="product.fin" required>
                </ng-template>
                <ng-template pTemplate="output">
                  {{product.fin}}
                </ng-template>
              </p-cellEditor>
            </td>
            <td>
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <input pInputText type="text" [(ngModel)]="product.pause" required>
                </ng-template>
                <ng-template pTemplate="output">
                  {{product.pause}}
                </ng-template>
              </p-cellEditor>
            </td>
            <td style="text-align:center">
              <button *ngIf="editing" pButton pRipple type="button"
                      pSaveEditableRow icon="pi pi-check"
                      (click)="onRowEditSave(product)"
                      class="p-button-rounded p-button-text p-button-success p-mr-2"
              ></button>
              <button *ngIf="editing" pButton pRipple type="button"
                      pCancelEditableRow icon="pi pi-times"
                      (click)="onRowEditCancel(product, ri)"
                      class="p-button-rounded p-button-text p-button-danger"
              ></button>
              <button *ngIf="!editing" pButton pRipple type="button"
                      data-toggle="modal"
                      data-target="#exampleModal"
                      pInitEditableRow icon="pi pi-pencil"
                      (click)="onRowEditInit(product, ri)"
                      class="p-button-rounded p-button-text"
              ></button>

              <div *ngIf="editing" class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                   aria-labelledby="exampleModalLabel"
                   aria-hidden="true"><form id="formModal">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Activitée du jour</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form class="formModal">
                        <div class="form-group">
                          <label class="col-form-label">jour:</label>
                          <input class="form-control" type="text" name="code"
                                 [(ngModel)]="this.dataApi.selectedProduct.jour ">
                        </div>
                        <div class="form-group">
                          <label class="col-form-label">immatriculation:</label>
                          <input class="form-control" name="name" type="text"
                                 [(ngModel)]="this.dataApi.selectedProduct.immatriculation"
                                 required>
                        </div>
                        <div class="form-group">
                          <label class="col-form-label">kilometrage:</label>
                          <input class="form-control" name="name" type="text"
                                 [(ngModel)]="this.dataApi.selectedProduct.kilometrage"
                                 required>
                        </div>
                        <div class="form-group">
                          <label class="col-form-label">debut:</label>
                          <input class="form-control" name="name" type="text"
                                 [(ngModel)]="this.dataApi.selectedProduct.debut"
                                 required>
                        </div>
                        <div class="form-group">
                          <label class="col-form-label">fin:</label>
                          <input class="form-control" name="name" type="text"
                                 [(ngModel)]="this.dataApi.selectedProduct.fin"
                                 required>
                        </div>
                        <div class="form-group">
                          <label class="col-form-label">pause:</label>
                          <input class="form-control" name="name" type="text"
                                 [(ngModel)]="this.dataApi.selectedProduct.pause"
                                 required>
                        </div>
                      </form>
                    </div>
                    <div class="modal-footer">

                      <button type="button" class="p-button-success p-mr-2" pButton pRipple pSaveEditableRow
                              (click)="onRowEditSave(this.dataApi.selectedProduct)" data-dismiss="modal">Save
                      </button>
                      <button type="button" class="p-button-danger" pButton pRipple pCancelEditableRow data-dismiss="modal"
                              (click)="onRowEditCancel(this.dataApi.selectedProduct,this.dataApi.selectedRow)">Cancel
                      </button>
                    </div>
                  </div>
                </div></form>
              </div>

            </td>
          </tr>
        </ng-template>
      </p-table>

      <ng-template pTemplate="footer">
        <button class="ml-2 fixed-bottom" pButton type="button" label="< Last Step" (click)="lastStepPlease()"></button>

        <button class="ml-2" pButton type="button" label="Next Step >" (click)="nextStepPlease()"></button>
        </ng-template>

  </p-card>



</div>
