<section class="row ">
  <div class="container ">

    <div class="float-right">
      <button class="btn btn-primary my-2 my-xl-2 "
              data-toggle="modal" data-target="#modalUserData">Nouveau collaborateur</button>
    </div>
    <div class="modal fade" id="modalUserData" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalLabel"
         aria-hidden="true">
      <form #myForm="ngForm" (ngSubmit)="createNewUserData(myForm)">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel1">Nouvelle activité</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label class="col-form-label">Prénom:</label>
                <input ngModel class="form-control"
                       name="firstname"
                       required
                       type="text">
              </div>
              <div class="form-group">
                <label class="col-form-label">Nom:</label>
                <input ngModel class="form-control"
                       name="lastname"
                       required
                       type="text">
              </div>
              <div class="form-group">
                <label class="col-form-label">Matricule:</label>
                <input ngModel class="form-control"
                       name="matricule"
                       required
                       type="text">
              </div>
              <div class="form-group">
                <label class="col-form-label">Email:</label>
                <input ngModel class="form-control"
                       name="email"
                       required
                       type="email">
              </div>
              <div class="form-group">
                <label class="col-form-label">Télephone:</label>
                <input ngModel class="form-control" name="phonenumber"
                       required
                       type="number">
              </div>
              <div class="form-group">
                <label class="col-form-label">Site:</label>
                <input ngModel class="form-control" name="site"
                       required
                       type="text">
              </div>
              <div class="form-group">
                <label class="col-form-label">Fonction:</label>
                <input ngModel class="form-control" name="function"
                       required
                       type="text">
              </div>
              <div class="form-group">
                <label class="col-form-label">Agence:</label>
                <input ngModel class="form-control" name="agency"
                       required
                       type="text">
              </div>
            </div>
            <div class="modal-footer">
              <button pButton type="button" class="btn p-button-danger p-mr-2"
                      data-dismiss="modal">Annuler</button>
              <button pButton type="button" class="btn p-button-success"
                      data-dismiss="modal" (click)="createNewUserData(myForm)">Valider
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class=" table-responsive">

      <table class="table table-hover">
        <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Prénom</th>
          <th scope="col">Nom</th>
          <th scope="col">Matricule</th>
          <th scope="col">Email</th>
          <th scope="col">Télephone</th>
          <th scope="col">Site</th>
          <th scope="col">Fonction</th>
          <th scope="col">Agence</th>
        </tr>
        </thead>
        <tbody *ngIf="!allUserDatas?.length" >
        <tr class="text-center">
          Aucune données

        </tr>
        </tbody>
        <tbody *ngIf="allUserDatas" >
        <tr *ngFor="let UserData of allUserDatas; index as i">
          <th scope="row">{{i + 1}}</th>
<!--          <td class=""><img class=" img-fluid " src="{{UserData.portada}}"></td>-->
          <td>{{UserData.firstname}}</td>
          <td>{{UserData.lastname}}</td>
          <td>{{UserData.matricule}}</td>
          <td>{{UserData.email}}</td>
          <td>{{UserData.phonenumber}}</td>
          <td>{{UserData.site}}</td>
          <td>{{UserData.function}}</td>
          <td>{{UserData.agency}}</td>
          <td *ngIf="UserData.userUid == userUid || isAdmin == true; else noOwner">
            <button class="btn btn-primary" data-toggle="modal" data-target="#modalUserData"
                    (click)="onPreUpdateUserData(UserData)">Update
            </button>
          </td>

          <ng-template #noOwner><td>
            <button class="btn btn-secondary" disabled="true">Update</button></td>
          </ng-template>

          <td *ngIf="isAdmin == true; else noAdmin">
            <button class="btn btn-danger" (click)="onDeleteUserData(UserData.id)">Delete</button>
          </td>
          <ng-template #noAdmin>
            <td>
              <button class="btn btn-danger" disabled="true">Delete</button></td>
          </ng-template>
        </tr>
        </tbody>
      </table>
      <app-modal [userUid]="userUid"></app-modal>

    </div>
  </div>
</section>
